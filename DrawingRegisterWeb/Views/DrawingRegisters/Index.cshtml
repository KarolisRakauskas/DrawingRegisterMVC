@model DrawingRegisterWeb.ViewModels.RegisterVM

@{
	ViewData["Title"] = "Index";
}

<div id="backgroundImgDR" class="mt-5 jumbotron mb-0">
	<h1 class="display-1 text-light text-center p-3"><b>Your Drawing Register!</b></h1>
</div>

<hr />

<p class="lead text-center">&emsp;This is where you can manage Your Drawing Register! 
	Create invitations to your register, manage team members or join existing register.
</p>

<hr />

@if (Model.DrawingRegister == null)
{
	<div class="row row-cols-1 row-cols-lg-2 g-2 g-lg-3 mt-3">

		<div class="col">
			<div class="card mt-2 h-100">
				<div class="card-body">
					<div class="row mt-3">
						<div class="col-6">
							<h2 class="card-title text-primary">Create Your Own Drawing Register</h2>
							<h6 class="card-subtitle text-secondary">Register Owner - Administrator</h6>
						</div>
						<div class="col-6 text-end">
							<img src="~/Assets/owner.png" />
						</div>
					</div>

					<div class="text-end mt-3">
						<a asp-action="Create" class="btn btn-lg btn-outline-primary"><i class="bi bi-plus-circle"></i> Create Register</a>
					</div>

					<p class="card-text lead text-secondary mt-3">&emsp;Start Fresh and build your own Drawing Register! 
						It will allow you to create project states, projects, drawings, documentation and 
						layouts. Once the register is added, you will be assigned as an Administrator.
					</p>
			  </div>
			</div>
		</div>

		<div class="col">
			<div class="card mt-2 h-100">
				<div class="card-body">


					<div class="row mt-3">
						<div class="col-4">
							<h2 class="card-title text-primary">Join Existing Register</h2>
							<h6 class="card-subtitle text-secondary">Engineer & Mechanic</h6>
						</div>
						<div class="col-8 text-end">
							<img src="~/Assets/engineer.png" />
							<img src="~/Assets/mechanic.png" />
						</div>
					</div>

					<div class="text-end mt-3">
						<a href="#" class="btn btn-lg btn-outline-primary"><i class="bi bi-send-plus"></i> Request an invitation</a>
					</div>

					<p class="card-text lead text-secondary mt-3">&emsp;Send a request to the Existing Drawing Register. 
						Once the administrator approves your application, you can access register.
					</p>
			  </div>
			</div>
		</div>
	</div>
}
else
{

<div class="row row-cols-1 row-cols-lg-2 g-2 g-lg-3 mt-3">
	<div class="col">
		<div class="p-3 border rounded h-100">
			<h2 class="text-primary display-5">Team Members</h2>
			<h6 class="text-secondary">&emsp;View your team, change roles, remove members from register</h6>
			<div class="table-responsive">
			<table class="table table-borderless mt-5">
				<thead>
					<tr>
						<th></th>
						<th>
							@Html.DisplayNameFor(model => model.DrawingRegisterUsers![0].IdentityUser!.Email)
						</th>
						<th>
							@Html.DisplayNameFor(model => model.DrawingRegisterUsers![0].Role)
						</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model.DrawingRegisterUsers!)
					{
						<tr style="vertical-align: middle">
							<td>
							@if (@item.Role == ConstData.Role_Admin_Name)
							{
								<img style="height:2em" src="~/Assets/owner.png"/>
							}
							else if (@item.Role == ConstData.Role_Engr_Name)
							{
								<img style="height:2em" src="~/Assets/engineer.png" />
							}
							else if (@item.Role == ConstData.Role_Mech_Name)
							{
								<img style="height:2em" src="~/Assets/mechanic.png" />
							}
							</td>
							<td>
							@item.IdentityUser!.Email
							</td>
							<td>
							@item.Role
							</td>
							<td>
								<div class="btn-group">
									<button class="btn btn-outline-primary"><i class="bi bi-pencil-square"></i> Role</button>
									<button class="btn btn-outline-danger"><i class="bi bi-person-dash"></i> Remove</button>
								</div>
							</td>
						</tr>
					}
				</tbody>
				</table></div>
		</div>
	</div>

	<div class="col">
		<div class="p-3 border rounded h-100">
			<h3 class="text-primary display-5">Invitations/Requests</h3>
		</div>
	</div>
</div>

<hr class="mt-5"/>
	<h3 class="text-primary display-6">TODO: Progress</h3>
<hr/>

<div class="alert alert-warning mt-4">
	<h4 class="alert-heading">Warning!</h4>
	<p class="mb-0">
		&emsp;As an Administrator, you can Delete your Drawing Register. Once Register Deleted your Drawings 
		and Projects will be Deleted as well. If you have assigned another team member as an Administrator, 
		you can simply leave Register and join another one or send a request to join the same Register again.
	</p>
	<div class="mt-4">
		<div class="btn-group">
			<a 
				asp-action="Delete" 
				asp-route-id="@Model.DrawingRegister!.Id" 
				class="btn btn-outline-danger">
					<i class="bi bi-trash-fill"></i>&emsp;Delete Register
			</a>

			<a 
				class="btn btn-outline-dark">
					<i class="bi bi-person-dash"></i>&emsp; Leave Register
			</a>
		</div>
	</div>
</div>

}